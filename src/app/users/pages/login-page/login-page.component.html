<div class="container justify-content-center  py-4" style="min-height: 55vh;">

  <!-- Alert para inicio de sesion fallido -->
  <div *ngIf="loginFailed" class="alert alert-danger alert-dismissible fade show" role="alert">
    <strong>¡Error!</strong> El correo o la contraseña son incorrectos, por favor intenta de nuevo.
    <button type="button" class="btn-close" (click)="loginFailed = false" aria-label="Close"></button>
  </div>

  <!-- Alert para registro de usuario fallido -->
  <div *ngIf="registerFailed" class="alert alert-danger alert-dismissible fade show" role="alert">
    <strong>¡Error!</strong> No se pudo registrar el usuario, por favor intenta de nuevo.
    <button type="button" class="btn-close" (click)="registerFailed = false" aria-label="Close"></button>
  </div>

  <!-- Alert para registro de usuario exitoso -->
  <div *ngIf="registerSuccess" class="alert alert-success alert-dismissible fade show" role="alert">
    <strong>¡Éxito!</strong> El usuario se ha registrado correctamente, por favor inicia sesión.
    <button type="button" class="btn-close" (click)="registerSuccess = false" aria-label="Close"></button>
  </div>

  <div class="d-flex justify-content-center">
    <main class="form-signin align-items-center bg-info bg-opacity-25  rounded">
      <form  (ngSubmit)="onSubmit()" [formGroup]="loginForm" class="w-100 p-5">
        <div class="d-flex justify-content-center">

          <img src="assets/shorket_logo.png" alt="Logo" class="mb-4 img-logo">
        </div>
        <h1 class="h3 mb-3 fw-normal">Bienvenido a Shortek, por favor inicia sesión</h1>
        <div class="form-floating">
          <input type="email" class="form-control" id="email_login" formControlName="email_login" placeholder="name@example.com">
          <label for="email_login">Correo electrónico</label>
        </div>
        <div class="form-floating">
          <input type="password" class="form-control" id="password_login" formControlName="password_login" placeholder="Password">
          <label for="password_login">Contraseña</label>
        </div>
        <div class="form-check text-start my-3">
          <input class="form-check-input" type="checkbox" value="remember-me" id="flexCheckDefault">
          <label class="form-check-label" for="flexCheckDefault">
            Recuérdame
          </label>
        </div>
        <button (click)="onSubmit()" class="btn btn-primary w-100 py-2">Iniciar sesión</button>
      </form>

      <div class="w-100 p-5" style="margin-top: -3rem;">
        <button (click)="modal.show()" class="btn btn-info w-100 py-2">¿No tienes una cuenta? Crea una</button>
      </div>
    </main>
  </div>

</div>

<div class="modal fade" id="registerNewUser" tabindex="-1" aria-labelledby="registerNewUserModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="registerNewUserModalLabel">Para crear tu cuenta, por favor rellena estos datos</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form [formGroup]="registerForm" (ngSubmit)="onSubmitRegister()">
          <div class="form-group">
            <label class="form-label" for="name">Nombre</label>
            <input class="form-control" type="text" id="name" formControlName="name">
          </div>
          <div class="form-group">
            <label class="form-label" for="last_name">Apellidos</label>
            <input class="form-control" type="text" id="last_name" formControlName="last_name">
          </div>
          <div class="form-group">
            <label class="form-label" for="email">Correo electrónico</label>
            <input class="form-control" type="text" id="email" formControlName="email">
          </div>
          <div class="form-group">
            <label class="form-label" for="password">Contraseña</label>
            <input class="form-control" type="password" id="password" formControlName="password">
          </div>
          <div class="form-group">
            <label class="form-label" for="verify_password">Verificar contraseña</label>
            <input class="form-control" type="password" id="verify_password" formControlName="verify_password">
          </div>
          <div class="form-group">
            <label class="form-label" for="birth_date">Fecha de nacimiento</label>
            <div class="input-group">
              <input
                id="birth_date"
                class="form-control"
                placeholder="yyyy-mm-dd"
                name="birth_date"
                formControlName="birth_date"
                ngbDatepicker
                #d="ngbDatepicker"
              />
              <button class="btn btn-outline-secondary bi bi-calendar3" (click)="d.toggle()" type="button"></button>

            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar registro</button>
        <button (click)="onSubmitRegister()" type="button" class="btn btn-primary">Crear cuenta</button>
      </div>
    </div>
  </div>
</div>
